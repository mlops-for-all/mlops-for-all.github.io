---
title : "Why Kuberntes?"
description: "Reason for using k8s in MLOps"
lead: ""
draft: false
weight: 103
contributors: ["Jaeyeon Kim"]
menu:
  docs:
    parent: "introduction"
---

## MLOps 를 얘기할 때, 쿠버네티스가 빠지지 않는 이유

 그렇다면 MLOps 를 얘기할 때, 항상 쿠버네티스 얘기가 들리는 이유는 무엇일까요? 

 성공적인 MLOps 시스템을 구축하기 위해서는 앞서 말씀드린 여러 구성 요소들이 필요하지만, 각각의 구성요소들이 유기적으로 운영되기 위해서는 인프라 레벨에서 여러 이슈들을 해결해야 합니다. 간단하게는 머신러닝 모델의 학습 요청을 스케줄링해야 하는 것, 실행 환경의 격리를 보장해야 하는 것, 배포된 서비스에 장애가 생기면 빠르게 대응해야 하는 것 등의 문제들을 생각해볼 수 있습니다.

 여기서 컨테이너와 컨테이너 오케스트레이션 시스템의 필요성이 등장합니다. 머신러닝 모델을 개발하며 다수가 하나의 동일한 서버를 공유해서 사용하며 '1번 서버 사용 중이신가요?', 'GPU 사용 중이던 제 프로세스 누가 죽였나요?', '누가 서버에 xx 패키지 업데이트 했나요?' 와 같은 상황에 고통받았던 경험이 한 번이라도 있으신 분들이라면 쿠버네티스와 같은 컨테이너 오케스트레이션 시스템 도입을 검토해보시기를 추천드립니다. 컨테이너 기반의 생태계를 활용한다면, 이러한 문제를 효과적으로 해결할 수 있습니다.

### 1.3.1 컨테이너와 도커

 그렇다면 컨테이너란 무엇일까요? ~ 에서는 컨테이너를 다음과 같이 표현하고 있습니다.

```
인용 ~~~
```

 컴퓨터 공학에 익숙하신 분이라면 이미 잘 알고 계시겠지만, 머신러닝 연구에 익숙하신 분들이라면 다소 생소하게 느껴질 수 있기에 간단한 비유를 들어보겠습니다. 여러분의 머신러닝 모델과 그 소스코드가 운영체제나 Python 실행 환경, 버전, 외부 패키지 버전 등에 따라 다르게 동작하지 않도록, 소스 코드와 함께 종속적인 실행 환경 전체를 하나의 패키지로 묶어서(패키징해서) 공유하고 실행할 수 있는 기술이 바로 컨테이너라이제이션 기술이라고 말할 수 있습니다. 그리고 패키징된 형태를 컨테이너 이미지라고 부릅니다. 컨테이너 이미지를 공유함으로써 사용자는 어떤 시스템에서든 동일한 실행 결과를 보장할 수 있게 됩니다.

 컨테이너를 처음 접하시는 분들이 흔히 하시는 오해 중 하나는 '도커==컨테이너'라고 이해하시는 것입니다. 도커는 컨테이너와 동일한 의미를 지니는 무언가가 아니라, 컨테이너를 띄우거나, 컨테이너 이미지를 만들고 공유하거나와 같이 컨테이너를 보다 쉽고 유연하게 사용할 수 있는 기능을 제공해주는 도구입니다. 다만, 쉬운 사용성과 높은 효율성을 바탕으로 이러한 컨테이너 가상화 도구 중에서 2021 년 현재 가장 핫한 위치를 차지하고 있기에, 컨테이너하면 도커라는 이미지가 자동으로 떠오르게 되었습니다.

 도커와 컨테이너는 다양한 장점을 바탕으로 그 생태계가 커지게 되었는데, 이에 대한 자세한 내용을 다루는 것은 본 문서의 범위를 넘어서기 때문에, 다음과 같은 링크를 참고해주시면 감사하겠습니다.

- ㅁㅁㅁ

### 1.3.2 컨테이너 오케스트레이션 시스템과 쿠버네티스

  그렇다면 컨테이너 오케스트레이션 시스템은 무엇일까요? 오케스트레이션이라는 단어 그대로, 수많은 컨테이너들이 있을 때, 컨테이너들이 서로 조화롭게 구동될 수 있도록 지휘하는 시스템이라고 말할 수 있습니다. 구동 중인 컨테이너의 수가 적거나, 서버의 수가 적다면 운영 담당자 한 명이서도 충분히 모든 상황에 대응할 수 있습니다. 하지만, 24/7 정상 동작해야 하는 서비스가 컨테이너의 형태로 제공되고 있으며, 수 백 개 이상의 컨테이너가 수 십 대 이상의 서버에서 구동되고 있다면, 모든 서비스의 정상 동작 여부를 담당자 한 두명이서 파악하고, 이슈를 대응하는 것은 불가능에 가깝습니다. 특정 서비스가 정상 동작하고 있지 않다면 여러 컨테이너들의 로그를 모두 확인하며 문제를 파악해야 하고, 트래픽이 몰리고 있다면 로드 밸런싱 혹은 스케일링을 해주어야 하며, 특정 서버에 작업이 몰리지 않도록 스케줄링해야하는 등 수많은 작업을 담당해야 합니다.

 이처럼 수많은 컨테이너들의 상태를 지속적으로 관리하고 운영하는 과정을 조금이나마 쉽게, 자동으로 할 수 있는 기능을 제공해주는 소프트웨어가 바로 컨테이너 오케스트레이션 시스템입니다. 머신러닝 관련된 상황을 예로 들면, GPU를 필요로 하는 딥러닝 모델 학습 코드가 패키징된 컨테이너는 GPU 여유가 있는 서버에서 수행하고, 많은 메모리를 필요로 하는 데이터 전처리 코드가 패키징된 컨테이너는 유휴 Memory 가 많은 서버에서 수행하고, 한 서버에 문제가 생기면 동일한 컨테이너를 다른 서버로 자동으로 이동시켜서 다시 학습을 진행하는 등의 작업을 더 이상 사람이 수행하지 않아도 된다는 의미입니다.

 컨테이너 오케스트레이션 시스템 또한 그 필요성이 대두되면서 다양한 소프트웨어가 등장하게 되었지만, 이 중 2021 년 현재를 기준으로 사실상의 de facto 는 쿠버네티스가 되었습니다.

- 설문조사 이미지 첨부

 쿠버네티스 생태계가 이처럼 커지게 된 이유에는 여러가지 이유가 있지만, 도커와 마찬가지로 쿠버네티스 또한 초기 진입 장벽이 존재하기 때문에, 자세히 다루기에는 본 시리즈의 본래의 목적에 어긋나게 될 것으로 판단하여 쿠버네티스에 대한 내용은 다루지 않도록 하였습니다. 쿠버네티스에 대해 익숙하지 않으신 분들은 다음 링크를 참고해주시면 감사하겠습니다.
 