<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://mlops-for-all.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://mlops-for-all.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://mlops-for-all.github.io/fonts/KaTeX_Main-Regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://mlops-for-all.github.io/fonts/KaTeX_Math-Italic.woff2 type=font/woff2 crossorigin><script>(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://mlops-for-all.github.io/main.b322a9a3364f1882721e852e80a8e044248b358e2ff6e31b579a6720391d26a1f333b3b69d78d5d52fa55aa6d7b7c13aa4f79124d35cd62ace77628e3dc1d71d.css integrity="sha512-syKpozZPGIJyHoUugKjgRCSLNY4v9uMbV5pnIDkdJqHzM7O2nXjV1S+lWqbXt8E6pPeRJNNc1irOd2KOPcHXHQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>4.3. Install Kubernetes - K3s - 모두의 MLOps</title><meta name=description content="1. Prerequisite # 쿠버네티스 클러스터를 구축하기에 앞서, 필요한 구성 요소들을 클러스터에 설치합니다.
Install Prerequisite을 참고하여 Kubernetes를 설치하기 전에 필요한 요소들을 클러스터에 설치해 주시기 바랍니다.
k3s 에서는 기본값으로 containerd를 백엔드로 이용해 설치합니다. 하지만 저희는 GPU를 사용하기 위해서 docker를 백엔드로 사용해야 하므로 --docker 옵션을 통해 백엔드를 docker로 설치하겠습니다.
curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.21.7+k3s1 sh -s - server --disable traefik --disable servicelb --disable local-storage --docker k3s를 설치 후 k3s config를 확인합니다
sudo cat /etc/rancher/k3s/k3s."><link rel=canonical href=https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="4.3. Install Kubernetes - K3s"><meta property="og:description" content="1. Prerequisite # 쿠버네티스 클러스터를 구축하기에 앞서, 필요한 구성 요소들을 클러스터에 설치합니다.
Install Prerequisite을 참고하여 Kubernetes를 설치하기 전에 필요한 요소들을 클러스터에 설치해 주시기 바랍니다.
k3s 에서는 기본값으로 containerd를 백엔드로 이용해 설치합니다. 하지만 저희는 GPU를 사용하기 위해서 docker를 백엔드로 사용해야 하므로 --docker 옵션을 통해 백엔드를 docker로 설치하겠습니다.
curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.21.7+k3s1 sh -s - server --disable traefik --disable servicelb --disable local-storage --docker k3s를 설치 후 k3s config를 확인합니다
sudo cat /etc/rancher/k3s/k3s."><meta property="og:url" content="https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/"><meta property="og:site_name" content="모두의 MLOps"><meta property="article:published_time" content="2021-12-13T00:00:00+00:00"><meta property="article:modified_time" content="2021-12-20T00:00:00+00:00"><meta property="og:image" content="https://mlops-for-all.github.io/doks.png"><meta property="og:image:alt" content="모두의 MLOps"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="4.3. Install Kubernetes - K3s"><meta name=twitter:description content><meta name=twitter:image content="https://mlops-for-all.github.io/doks.png"><meta name=twitter:image:alt content="4.3. Install Kubernetes - K3s"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://mlops-for-all.github.io/#/schema/organization/1","name":"Doks","url":"https://mlops-for-all.github.io/","sameAs":["https://github.com/mlops-for-all/mlops-for-all.github.io"],"logo":{"@type":"ImageObject","@id":"https://mlops-for-all.github.io/#/schema/image/1","url":"https://mlops-for-all.github.io/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://mlops-for-all.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://mlops-for-all.github.io/#/schema/website/1","url":"https://mlops-for-all.github.io/","name":"모두의 MLOps","description":"모두가 쉽게 시작할 수 있는 MLOps 자료를 제작합니다.","publisher":{"@id":"https://mlops-for-all.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/","url":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/","name":"4.3. Install Kubernetes - K3s","description":"","isPartOf":{"@id":"https://mlops-for-all.github.io/#/schema/website/1"},"about":{"@id":"https://mlops-for-all.github.io/#/schema/organization/1"},"datePublished":"2021-12-13T00:00:00CET","dateModified":"2021-12-20T00:00:00CET","breadcrumb":{"@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/"]}]},{"@type":"BreadcrumbList","@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://mlops-for-all.github.io","url":"https://mlops-for-all.github.io","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://mlops-for-all.github.io/docs/","url":"https://mlops-for-all.github.io/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/","url":"https://mlops-for-all.github.io/docs/setup-kubernetes/","name":"Setup Kubernetes"}},{"@type":"ListItem","position":5,"item":{"@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://mlops-for-all.github.io/#/schema/article/1","headline":"4.3. Install Kubernetes - K3s","description":"","isPartOf":{"@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/"},"mainEntityOfPage":{"@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/"},"datePublished":"2021-12-13T00:00:00CET","dateModified":"2021-12-20T00:00:00CET","author":{"@id":"https://mlops-for-all.github.io/#/schema/person/2"},"publisher":{"@id":"https://mlops-for-all.github.io/#/schema/organization/1"},"image":{"@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://mlops-for-all.github.io/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://github.com/mlops-for-all"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://mlops-for-all.github.io/docs/setup-kubernetes/kubernetes-with-k3s/#/schema/image/2","url":"https://mlops-for-all.github.io/doks.png","contentUrl":"https://mlops-for-all.github.io/doks.png","caption":"4.3. Install Kubernetes - K3s"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://mlops-for-all.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://mlops-for-all.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://mlops-for-all.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://mlops-for-all.github.io/site.webmanifest></head><body class="docs single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label="모두의 MLOps">모두의 MLOps</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>모두의 MLOps</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/docs/prologue/welcome/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/contributors/>Contributors</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/contact/>Contact</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/mlops-for-all/mlops-for-all.github.io><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></nav></header><nav class="doks-subnavbar py-2 sticky-lg-top" aria-label="Secondary navigation"><div class="container-xxl d-flex align-items-md-center"><form class="doks-search position-relative flex-grow-1 me-auto"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><button class="btn doks-sidebar-toggle d-lg-none ms-3 order-3 collapsed" type=button data-bs-toggle=collapse data-bs-target=#doks-docs-nav aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle documentation navigation"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></button></div></nav><div class=container-xxl><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><h3 class="h6 text-uppercase">Prologue</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/prologue/welcome/>Welcome to MLOps for ALL!</a></li></ul><h3 class="h6 text-uppercase">Introduction</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/introduction/intro/>1. What is MLOps?</a></li><li><a class=docs-link href=/docs/introduction/component/>2. Components of MLOps</a></li><li><a class=docs-link href=/docs/introduction/why_kubernetes/>3. Why Kubernetes?</a></li></ul><h3 class="h6 text-uppercase">Setup Kubernetes</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/setup-kubernetes/intro/>1. Introduction</a></li><li><a class=docs-link href=/docs/setup-kubernetes/kubernetes/>2. Setup Kubernetes</a></li><li><a class=docs-link href=/docs/setup-kubernetes/install-prerequisite/>3. Install Prerequisite</a></li><li><a class=docs-link href=/docs/setup-kubernetes/kubernetes-with-kubeadm/>4.1. Install Kubernetes - Kubeadm</a></li><li><a class=docs-link href=/docs/setup-kubernetes/kubernetes-with-minikube/>4.2. Install Kubernetes - Minikube</a></li><li><a class="docs-link active" href=/docs/setup-kubernetes/kubernetes-with-k3s/>4.3. Install Kubernetes - K3s</a></li><li><a class=docs-link href=/docs/setup-kubernetes/install-kubernetes-module/>5. Install Kubernetes Modules</a></li><li><a class=docs-link href=/docs/setup-kubernetes/setup-nvidia-gpu/>6. (Optional) Setup GPU</a></li></ul><h3 class="h6 text-uppercase">Setup Components</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/setup-components/install-components-kf/>1. Kubeflow</a></li><li><a class=docs-link href=/docs/setup-components/install-components-mlflow/>2. MLflow</a></li><li><a class=docs-link href=/docs/setup-components/install-components-seldon/>3. Seldon-Core</a></li><li><a class=docs-link href=/docs/setup-components/install-components-pg/>4. Prometheus & Grafana</a></li></ul><h3 class="h6 text-uppercase">Kubeflow</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/kubeflow/kubeflow-intro/>1. Kubeflow Introduction</a></li><li><a class=docs-link href=/docs/kubeflow/kubeflow-concepts/>2. Kubeflow Concepts</a></li><li><a class=docs-link href=/docs/kubeflow/basic-requirements/>3. Install Requirements</a></li><li><a class=docs-link href=/docs/kubeflow/basic-component/>4. Component - Write</a></li><li><a class=docs-link href=/docs/kubeflow/basic-pipeline/>5. Pipeline - Write</a></li><li><a class=docs-link href=/docs/kubeflow/basic-pipeline-upload/>6. Pipeline - Upload</a></li><li><a class=docs-link href=/docs/kubeflow/basic-run/>7. Pipeline - Run</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-component/>8. Component - InputPath/OutputPath</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-environment/>9. Component - Environment</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-pipeline/>10. Pipeline - Setting</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-run/>11. Pipeline - Run Result</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-mlflow/>12. Component - MLFlow</a></li><li><a class=docs-link href=/docs/kubeflow/how-to-debug/>13. Component - Debugging</a></li></ul><h3 class="h6 text-uppercase">API Deployment</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/api-deployment/example/>API Deployment example</a></li></ul><h3 class="h6 text-uppercase">appendix</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/appendix/pyenv/>1. Python 가상환경 설치</a></li></ul><h3 class="h6 text-uppercase">help</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/help/how-to-contribute/>How to Contribute</a></li></ul></nav></aside></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><h3 class="h6 text-uppercase">Prologue</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/prologue/welcome/>Welcome to MLOps for ALL!</a></li></ul><h3 class="h6 text-uppercase">Introduction</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/introduction/intro/>1. What is MLOps?</a></li><li><a class=docs-link href=/docs/introduction/component/>2. Components of MLOps</a></li><li><a class=docs-link href=/docs/introduction/why_kubernetes/>3. Why Kubernetes?</a></li></ul><h3 class="h6 text-uppercase">Setup Kubernetes</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/setup-kubernetes/intro/>1. Introduction</a></li><li><a class=docs-link href=/docs/setup-kubernetes/kubernetes/>2. Setup Kubernetes</a></li><li><a class=docs-link href=/docs/setup-kubernetes/install-prerequisite/>3. Install Prerequisite</a></li><li><a class=docs-link href=/docs/setup-kubernetes/kubernetes-with-kubeadm/>4.1. Install Kubernetes - Kubeadm</a></li><li><a class=docs-link href=/docs/setup-kubernetes/kubernetes-with-minikube/>4.2. Install Kubernetes - Minikube</a></li><li><a class="docs-link active" href=/docs/setup-kubernetes/kubernetes-with-k3s/>4.3. Install Kubernetes - K3s</a></li><li><a class=docs-link href=/docs/setup-kubernetes/install-kubernetes-module/>5. Install Kubernetes Modules</a></li><li><a class=docs-link href=/docs/setup-kubernetes/setup-nvidia-gpu/>6. (Optional) Setup GPU</a></li></ul><h3 class="h6 text-uppercase">Setup Components</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/setup-components/install-components-kf/>1. Kubeflow</a></li><li><a class=docs-link href=/docs/setup-components/install-components-mlflow/>2. MLflow</a></li><li><a class=docs-link href=/docs/setup-components/install-components-seldon/>3. Seldon-Core</a></li><li><a class=docs-link href=/docs/setup-components/install-components-pg/>4. Prometheus & Grafana</a></li></ul><h3 class="h6 text-uppercase">Kubeflow</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/kubeflow/kubeflow-intro/>1. Kubeflow Introduction</a></li><li><a class=docs-link href=/docs/kubeflow/kubeflow-concepts/>2. Kubeflow Concepts</a></li><li><a class=docs-link href=/docs/kubeflow/basic-requirements/>3. Install Requirements</a></li><li><a class=docs-link href=/docs/kubeflow/basic-component/>4. Component - Write</a></li><li><a class=docs-link href=/docs/kubeflow/basic-pipeline/>5. Pipeline - Write</a></li><li><a class=docs-link href=/docs/kubeflow/basic-pipeline-upload/>6. Pipeline - Upload</a></li><li><a class=docs-link href=/docs/kubeflow/basic-run/>7. Pipeline - Run</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-component/>8. Component - InputPath/OutputPath</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-environment/>9. Component - Environment</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-pipeline/>10. Pipeline - Setting</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-run/>11. Pipeline - Run Result</a></li><li><a class=docs-link href=/docs/kubeflow/advanced-mlflow/>12. Component - MLFlow</a></li><li><a class=docs-link href=/docs/kubeflow/how-to-debug/>13. Component - Debugging</a></li></ul><h3 class="h6 text-uppercase">API Deployment</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/api-deployment/example/>API Deployment example</a></li></ul><h3 class="h6 text-uppercase">appendix</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/appendix/pyenv/>1. Python 가상환경 설치</a></li></ul><h3 class="h6 text-uppercase">help</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/help/how-to-contribute/>How to Contribute</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#1-prerequisite>1. Prerequisite</a></li><li><a href=#2-쿠버네티스-클러스터-셋업>2. 쿠버네티스 클러스터 셋업</a></li><li><a href=#3-쿠버네티스-클라이언트-셋업>3. 쿠버네티스 클라이언트 셋업</a></li><li><a href=#4-쿠버네티스-기본-모듈-설치>4. 쿠버네티스 기본 모듈 설치</a></li><li><a href=#5-정상-설치-확인>5. 정상 설치 확인</a></li><li><a href=#6-references>6. References</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>4.3. Install Kubernetes - K3s</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#1-prerequisite>1. Prerequisite</a></li><li><a href=#2-쿠버네티스-클러스터-셋업>2. 쿠버네티스 클러스터 셋업</a></li><li><a href=#3-쿠버네티스-클라이언트-셋업>3. 쿠버네티스 클라이언트 셋업</a></li><li><a href=#4-쿠버네티스-기본-모듈-설치>4. 쿠버네티스 기본 모듈 설치</a></li><li><a href=#5-정상-설치-확인>5. 정상 설치 확인</a></li><li><a href=#6-references>6. References</a></li></ul></nav></div></nav><h2 id=1-prerequisite>1. Prerequisite <a href=#1-prerequisite class=anchor aria-hidden=true>#</a></h2><p>쿠버네티스 클러스터를 구축하기에 앞서, 필요한 구성 요소들을 <strong>클러스터에</strong> 설치합니다.</p><p><a href=/docs/setup-kubernetes/install-prerequisite/>Install Prerequisite</a>을 참고하여 Kubernetes를 설치하기 전에 필요한 요소들을 <strong>클러스터에</strong> 설치해 주시기 바랍니다.</p><p>k3s 에서는 기본값으로 containerd를 백엔드로 이용해 설치합니다.
하지만 저희는 GPU를 사용하기 위해서 docker를 백엔드로 사용해야 하므로 <code>--docker</code> 옵션을 통해 백엔드를 docker로 설치하겠습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>curl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.21.7+k3s1 sh -s - server --disable traefik --disable servicelb --disable local-storage --docker
</code></pre></div><p>k3s를 설치 후 k3s config를 확인합니다</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>sudo cat /etc/rancher/k3s/k3s.yaml
</code></pre></div><p>정상적으로 설치되면 다음과 같은 항목이 출력됩니다.<br>(보안 문제와 관련된 키들은 &lt;&mldr;>로 가렸습니다.)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>apiVersion: v1
clusters:
- cluster:
    certificate-authority-data:
    &lt;...&gt;
    server: https://127.0.0.1:6443
  name: default
contexts:
- context:
    cluster: default
    user: default
  name: default
current-context: default
kind: Config
preferences: {}
users:
- name: default
  user:
    client-certificate-data:
    &lt;...&gt;
    client-key-data:
    &lt;...&gt;
</code></pre></div><h2 id=2-쿠버네티스-클러스터-셋업>2. 쿠버네티스 클러스터 셋업 <a href=#2-%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4-%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0-%ec%85%8b%ec%97%85 class=anchor aria-hidden=true>#</a></h2><p>k3s config를 클러스터의 kubeconfig로 사용하기 위해서 복사합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>mkdir .kube
sudo cp /etc/rancher/k3s/k3s.yaml .kube/config
</code></pre></div><p>복사된 config 파일에 user가 접근할 수 있는 권한을 줍니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>sudo chown $USER:$USER .kube/config
</code></pre></div><h2 id=3-쿠버네티스-클라이언트-셋업>3. 쿠버네티스 클라이언트 셋업 <a href=#3-%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4-%ed%81%b4%eb%9d%bc%ec%9d%b4%ec%96%b8%ed%8a%b8-%ec%85%8b%ec%97%85 class=anchor aria-hidden=true>#</a></h2><p>이제 클러스터에서 설정한 kubeconfig를 로컬로 이동합니다.
로컬에서는 경로를 <code>~/.kube/config</code>로 설정합니다.</p><p>처음 복사한 config 파일에는 server ip가 <code>https://127.0.0.1:6443</code> 으로 되어 있습니다.<br>이 값을 클러스터의 ip에 맞게 수정합니다.<br>(이번 페이지에서 사용하는 클러스터의 ip에 맞춰서 <code>https://192.168.0.19:6443</code> 으로 수정했습니다.)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>apiVersion: v1
clusters:
- cluster:
    certificate-authority-data:
    &lt;...&gt;
    server: https://192.168.0.19:6443
  name: default
contexts:
- context:
    cluster: default
    user: default
  name: default
current-context: default
kind: Config
preferences: {}
users:
- name: default
  user:
    client-certificate-data:
    &lt;...&gt;
    client-key-data:
    &lt;...&gt;
</code></pre></div><h2 id=4-쿠버네티스-기본-모듈-설치>4. 쿠버네티스 기본 모듈 설치 <a href=#4-%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4-%ea%b8%b0%eb%b3%b8-%eb%aa%a8%eb%93%88-%ec%84%a4%ec%b9%98 class=anchor aria-hidden=true>#</a></h2><p><a href=/docs/setup-kubernetes/install-kubernetes-module/>Setup Kubernetes Modules</a>을 참고하여 다음 컴포넌트들을 설치해 주시기 바랍니다.</p><ul><li>helm</li><li>kustomize</li><li>CSI plugin</li><li>[Optional] nvidia-docker, nvidia-device-plugin</li></ul><h2 id=5-정상-설치-확인>5. 정상 설치 확인 <a href=#5-%ec%a0%95%ec%83%81-%ec%84%a4%ec%b9%98-%ed%99%95%ec%9d%b8 class=anchor aria-hidden=true>#</a></h2><p>최종적으로 node 가 Ready 인지, OS, Docker, Kubernetes 버전을 확인합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>kubectl get nodes -o wide
</code></pre></div><p>다음과 같은 메시지가 보이면 정상적으로 설치된 것을 의미합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>NAME    STATUS   ROLES                  AGE   VERSION        INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME
ubuntu   Ready    control-plane,master   11m   v1.21.7+k3s1   192.168.0.19   &lt;none&gt;        Ubuntu 20.04.3 LTS   5.4.0-91-generic   docker://20.10.11
</code></pre></div><h2 id=6-references>6. References <a href=#6-references class=anchor aria-hidden=true>#</a></h2><ul><li><a href=https://rancher.com/docs/k3s/latest/en/installation/install-options/>https://rancher.com/docs/k3s/latest/en/installation/install-options/</a></li></ul><p class=edit-page><a href=https://github.com/mlops-for-all/mlops-for-all.github.io/blob/main/content/en/docs/setup-kubernetes/kubernetes-with-k3s.md><svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=/docs/setup-kubernetes/kubernetes-with-minikube/><div class="card my-1"><div class="card-body py-2">&larr; 4.2. Install Kubernetes - Minikube</div></div></a><a class=ms-auto href=/docs/setup-kubernetes/install-kubernetes-module/><div class="card my-1"><div class="card-body py-2">5. Install Kubernetes Modules &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.592b9faf6c83a2bda564a377cf82f9a67546b198510a93fdb0728f9622ec22729d44be02fb2ea16c3fe5365ae1806259cd111932ca28e68b66462d6937635bab.js integrity="sha512-WSufr2yDor2lZKN3z4L5pnVGsZhRCpP9sHKPliLsInKdRL4C+y6hbD/lNlrhgGJZzREZMsoo5otmRi1pN2Nbqw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.e13cfba4c5524e30386cb9ea71f0f191f39d15b25b222f4b67549689f7c076158f42a2282446044f5cdacc76a6d003efbfa252a84aea0116703803b6339ae35f.js integrity="sha512-4Tz7pMVSTjA4bLnqcfDxkfOdFbJbIi9LZ1SWiffAdhWPQqIoJEYET1zazHam0APvv6JSqErqARZwOAO2M5rjXw==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/katex.min.849bcb0a26d9f709f5e2355f5188d1c21e07bb04544918a1c2a6d290dc2ebcb9b787ba92911f609242c898b7ce8009c541be9153a357e673818164f829d917fe.js integrity="sha512-hJvLCibZ9wn14jVfUYjRwh4HuwRUSRihwqbSkNwuvLm3h7qSkR9gkkLImLfOgAnFQb6RU6NX5nOBgWT4KdkX/g==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/contrib/auto-render.min.916823ec103cf367b71e28a6f01513cb9c3ac6708ccb5229402ec46b8e30a8b25003db694df35d80e9dd666a371f327c6152790617b6256390c164109a90bd4c.js integrity="sha512-kWgj7BA882e3Hiim8BUTy5w6xnCMy1IpQC7Ea44wqLJQA9tpTfNdgOndZmo3HzJ8YVJ5Bhe2JWOQwWQQmpC9TA==" crossorigin=anonymous defer></script>
<script src=/main.min.647c6f9869eb8e24d3f5183f467970dbadd12adeec725e66830376db069558e917e21eb7dd363563443d2c91c5c6557ea3b2864d1f2a78c3f65e676fa19b961b.js integrity="sha512-ZHxvmGnrjiTT9Rg/Rnlw263RKt7scl5mgwN22waVWOkX4h633TY1Y0Q9LJHFxlV+o7KGTR8qeMP2XmdvoZuWGw==" crossorigin=anonymous defer></script>
<script src=https://mlops-for-all.github.io/index.min.30ebc665db89e03d7c0d4cc94e94d6919c2f9ab34308cf247b2923d93814b17f8137cd0ec49a1c7a5a6a36c91ae02eb3d899d5e46693cca1822619925c9ea932.js integrity="sha512-MOvGZduJ4D18DUzJTpTWkZwvmrNDCM8keykj2TgUsX+BN80OxJocelpqNska4C6z2JnV5GaTzKGCJhmSXJ6pMg==" crossorigin=anonymous defer></script></body></html>